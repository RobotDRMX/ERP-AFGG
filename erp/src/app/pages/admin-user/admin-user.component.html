<div class="flex-between mb-6">
    <div>
        <h2 class="text-2xl font-bold text-color">Usuarios</h2>
        <p class="text-muted">Administre los accesos y roles de su empresa.</p>
    </div>
    <p-button label="Nuevo Usuario" icon="pi pi-plus" />
</div>

<p-card>
    <p-table [value]="userService.users()" [paginator]="true" [rows]="10" [tableStyle]="{ 'min-width': '50rem' }"
        styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
            <tr>
                <th class="font-bold">Nombre</th>
                <th class="font-bold">Email</th>
                <th class="font-bold">Rol</th>
                <th class="font-bold">Estado</th>
                <th class="font-bold">Fecha Registro</th>
                <th style="width: 8rem" class="font-bold">Acciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
            <tr>
                <td>{{ user.name }}</td>
                <td>{{ user.email }}</td>
                <td>
                    <p-tag [value]="user.role.toUpperCase()" [severity]="getRoleSeverity(user.role)" />
                </td>
                <td>
                    <p-tag [value]="user.active ? 'ACTIVO' : 'INACTIVO'"
                        [severity]="user.active ? 'success' : 'danger'" />
                </td>
                <td>{{ user.createdAt | date:'shortDate' }}</td>
                <td>
                    <div class="flex gap-2">
                        <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="secondary" />
                        <p-button [icon]="user.active ? 'pi pi-user-minus' : 'pi pi-user-plus'" [rounded]="true"
                            [text]="true" [severity]="user.active ? 'danger' : 'success'"
                            (onClick)="userService.toggleActive(user.id)" />
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</p-card>