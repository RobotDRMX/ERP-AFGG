<!-- Header -->
<div class="flex-between mb-6">
    <div>
        <h2 class="text-2xl font-bold text-color">Grupos</h2>
        <p class="text-muted">Administra los grupos y su progreso general.</p>
    </div>
    <p-button label="Nuevo Grupo" icon="pi pi-plus" />
</div>

<!-- Stat cards -->
<div class="flex gap-4 mb-6">
    <p-card styleClass="flex-1">
        <div class="flex-between">
            <div>
                <p class="text-muted text-sm mb-1">Total Alumnos</p>
                <p class="text-2xl font-bold text-color">{{ totalStudents }}</p>
            </div>
            <i class="pi pi-users text-primary" style="font-size: 2rem;"></i>
        </div>
    </p-card>

    <p-card styleClass="flex-1">
        <div class="flex-between">
            <div>
                <p class="text-muted text-sm mb-1">Total Grupos</p>
                <p class="text-2xl font-bold text-color">{{ groups.length }}</p>
            </div>
            <i class="pi pi-th-large text-success" style="font-size: 2rem;"></i>
        </div>
    </p-card>

    <p-card styleClass="flex-1">
        <div class="flex-between">
            <div>
                <p class="text-muted text-sm mb-1">Avances Registrados</p>
                <p class="text-2xl font-bold text-color">{{ totalAdvances }}</p>
            </div>
            <i class="pi pi-chart-line text-warning" style="font-size: 2rem;"></i>
        </div>
    </p-card>
</div>

<!-- Group cards -->
<div class="grid-auto-fit">
    @for (group of groups; track group.id) {
        <p-card>
            <ng-template pTemplate="header">
                <div class="flex-between p-4 border-b">
                    <span class="font-bold text-color">{{ group.name }}</span>
                    <p-tag [value]="getStatusLabel(group.status)" [severity]="getStatusSeverity(group.status)" />
                </div>
            </ng-template>

            <div class="flex-col gap-3">
                <div class="flex-between">
                    <span class="text-muted text-sm">Total alumnos</span>
                    <span class="font-bold text-color text-xl">{{ group.total }}</span>
                </div>

                <div class="flex-between">
                    <span class="text-muted text-sm">Avances</span>
                    <span class="font-bold text-color text-xl">{{ group.advances }}</span>
                </div>

                <div>
                    <p-progressbar [value]="getProgress(group)" [showValue]="false" styleClass="mb-1" />
                    <small class="text-muted">{{ getProgress(group) }}% completado</small>
                </div>
            </div>

            <ng-template pTemplate="footer">
                <p-button label="Ver detalles" icon="pi pi-eye" [text]="true" severity="secondary" size="small" />
                <p-button label="Editar" icon="pi pi-pencil" [text]="true" size="small" styleClass="ml-1" />
            </ng-template>
        </p-card>
    }
</div>
